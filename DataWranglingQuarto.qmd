---
title: "Data Wrangling BIOE 276 Assignment 1"
author: "Ward, A"
format: 
  pdf: default
editor: visual
---

# Activity 6: Data wrangling 1: rows and columns

## 1.1 Introducing tidyverse and the pipeline

Begin by loading packages

```{r}
## Load packages from library
library("tidyverse")
library(here)
```

Starting with a vector and stringing multiple functions with the pipeline:

```{r}
#| output: true

#Create vector
fruits <- c("apple", "apple", "orange", "orange", "banana")

#Find unique values
unique(fruits)
```

If I am wanting to apply the length function to this vector, I can either:

```{r}
#| output: true

# 1) Nest the unique function within the length function
length(unique(fruits))
```

```{r}
#| output: true

# 2) Create intermediate data objects
unique.fruits <- unique(fruits)
length(unique.fruits)
```

OR, I can use the pipeline here:

```{r}
#| output: true

#This :
fruits %>% unique()

#is equivalent to this:
unique(fruits)
```

And you can pipe together multiple:

```{r}
#| output: true

# Piping!
fruits %>% unique() %>% length()

#Can be spread across multiple lines
fruits %>% 
  unique() %>% 
  length()

```

## 1.2 Import data, apply the pipeline

Import data:

```{r}
# Import the data
cereal <- read_csv(here("cereal.csv"))

# Take a look at the first six rows
head(cereal)
```

We can use the pipeline to extract many things at once:

```{r}
#| output: true

# Start with the cereal dataframe
cereal %>%
  # This line extracts the column names from the dataframe input and creates a vector
  colnames() %>% 
  # This line calculates the "length" (the number) of those names from the vector input
  length()
```

## 1.3 `select()` columns

Selecting columns from cereal:

```{r}
cereal %>% 
  select(name, calories, fiber)
```

```{r}
#Storing as new object
cereal_fiber <- cereal %>% 
  select(name, calories, fiber)

```

```{r}
#Excluding certain columns
cereal %>% 
  select(-name, -mfr)
```

### Q1.1: Create a new dataframe with `select()`

```{r}
#| output: true

#Creating a new df 
cereal_sugar <- cereal %>% 
  select(name, mfr, sugars) #selecting name, manufacturer, and sugar per serving
```

## 1.4 `rename()` columns

Learning to rename columns with rename:

```{r}
#| output: true
cereal_sugar %>% 
  # Rename the mfr column to a more informative manufacturer
  rename(manufacturer = mfr)

#Rename multiple columns
cereal_sugar %>% 
  rename(manufacturer = mfr,
         cereal_name = name)
```

## 1.5 `relocate()` columns

Relocate where columns are in the data frame:

```{r}
#| output: true
#Moving manufacturer before cereal name
cereal_sugar %>% 
  relocate(mfr, .before = name)

```

## 1.6. `filter()` for certain rows

Filter gives certain rows based on specified conditions:

```{r}
#| output: true
#Filtering for those with >12 grams of sugar
cereal_sugar %>% 
  filter(sugars > 12)
```

```{r}
#filtering for kellogs cereals
cereal_sugar %>% 
  filter(mfr == "Kelloggs")
```

### Q1.2 Filter for Kelloggs AND sugars \> 12

Filter the dataframe to return rows where the manufacturer is Kelloggs AND the sugars are greater than 12, all within the same filter function:

```{r}
#| output: true
#Filtering for both >12 and for Kellogs
cereal_sugar %>% 
  filter(mfr == "Kelloggs" & sugars > 12)
```

### Q1.3 Select and then filter using pipelines

Now we will look at how the %\>% operator can be particularly helpful. Say we want to select certain columns and THEN filter that data.

Using what you learned about stringing together functions in sections 1.1 and 1.2:

1.  Take the cereal dataframe and select the name, fat, and potassium columns

2.  Then filter that output to return rows where potassium is less than 30

You should string together two functions with two pipelines here.

```{r}
#| output: true
#Filtering cereal df
cereal_K <- cereal %>% 
  select(name, fat, potass) %>% 
  filter(potass < 30)

head(cereal_K)
```

### Q1.4 Yet another select/filter challenge

```{r}
#| output: true
#Filtering cereal df
cereal_nutrition <- cereal %>% 
  filter(calories> 120) %>% 
  select(name, fiber, fat, sodium)
 

head(cereal_nutrition)
```
